---
sidebar_position: 18
---

# ðŸ§© Agent NFT

## Overview

Eliza's Agent NFT is a unique asset for each agent, which is stored on the [0G](https://0g.ai/) blockchain. The NFT contains the agent's ownership and private data. The NFT can be transferred, cloned, and authorized to other. The NFT follows the [ERC-7857](https://github.com/0glabs/ERCs/blob/master/ERCS/erc-7857.md) standard [0G](https://0g.ai/) proposed.

## Core Components

The core component of the Agent NFT is the `AgentNFTClient` class, which is used to interact with the Agent NFT smart contract deployed on the [0G](https://0g.ai/) network. It provides methods to generate new agent NFTs from local agent data, and start a new agent from an existing NFT.

### Generate Agent NFT

When generating a new agent NFT:
   - The agent's character data and memory (SQLite database) are stored in a specified base directory.
   - The agent data is uploaded to the [0G](https://0g.ai/) storage network.
   - Merkle trees are generated for the character data and memory, and the root hashes are obtained.
   - Ownership proofs are generated using the preimages and claimed hashes (TODO: implement actual proof generation).
   - The `mintToken` method is called on the Agent NFT contract, passing the proofs and data descriptions.
   - The newly minted token ID is returned.

### Start Agent from NFT

When starting an agent from an existing NFT:
   - The `loadFromNFT` function is called with the token ID and base directory when starting an agent from an existing NFT.
   - The token data (owner, data hashes, data descriptions, authorized users, storage url) is fetched from the contract.
   - Token ownership is validated by comparing the claimed owner with the actual token owner.
   - The agent data is downloaded from the [0G](https://0g.ai/) storage network and the data hashes and saved in the `AgentMetadata`.
   - The agent starts with `AgentMetadata` like previous starting with a local agent data (character data and memory).

## Configuration

The following environment variables are required:

- `ZEROG_RPC_URL`: The RPC URL of the 0G network.
- `ZEROG_INDEXER_RPC_URL`: The Indexer RPC URL for the [0G](https://0g.ai/) network.
- `ZEROG_PRIVATE_KEY`: The private key of the agent owner.
- `ZEROG_AGENT_NFT_CONTRACT_ADDRESS`: The address of the Agent NFT contract.

## Usage

### Generating an Agent NFT

To generate a new agent NFT, run the `generate-nft` script with the parameter `--dir`, which is the base directory the agent data placed in, and `--dir` must be specified in generate-nft script:

```bash
pnpm generate-nft --dir="./data"
```
This will create a new agent NFT using the character data and memory stored in the specified `--dir` directory. The minted token ID will be logged.

### Starting an Agent from an Existing NFT

To start an agent from an existing NFT, run the `start` script with the parameter `--token`, which is the token ID of the NFT, and the parameter `--dir` is the base directory to store the agent data, if not specified, the data will be stored in a unique directory generated by the token ID.

```bash
pnpm start --token="1" --dir="./data"
```

This will download the agent data associated with the specified token ID, save it in the `--dir`, and start the agent with the saved agent data.


## Extension Reading

- [ERC-7857](https://github.com/0glabs/ERCs/blob/master/ERCS/erc-7857.md)
- [0G-Agent-NFT](https://github.com/0glabs/0g-agent-nft/tree/eip-7857-draft)
